<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UMD SDK åŠ è½½æµ‹è¯•</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
    }
    .container {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .test-item {
      background: rgba(255, 255, 255, 0.2);
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      font-family: 'Courier New', monospace;
    }
    .success {
      color: #4ade80;
    }
    .error {
      color: #f87171;
    }
    .warning {
      color: #fbbf24;
    }
    pre {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 10px 0;
    }
    button {
      background: #4ade80;
      color: #000;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      margin: 10px 5px;
      transition: all 0.3s;
    }
    button:hover {
      background: #22c55e;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(74, 222, 128, 0.4);
    }
    button:disabled {
      background: #6b7280;
      cursor: not-allowed;
      transform: none;
    }
  </style>
  
  <!-- åŠ è½½ Zama FHE SDK (UMD) -->
  <script
    src="https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs"
    type="text/javascript"
    onload="console.log('âœ… SDK è„šæœ¬åŠ è½½æˆåŠŸ')"
    onerror="console.error('âŒ SDK è„šæœ¬åŠ è½½å¤±è´¥')"
  ></script>
</head>
<body>
  <div class="container">
    <h1>ğŸ” Zama FHE SDK UMD åŠ è½½æµ‹è¯•</h1>
    
    <div id="results"></div>
    
    <div style="text-align: center; margin-top: 30px;">
      <button onclick="runTests()">ğŸš€ è¿è¡Œæµ‹è¯•</button>
      <button onclick="location.reload()">ğŸ”„ åˆ·æ–°é¡µé¢</button>
    </div>
  </div>

  <script>
    const resultsDiv = document.getElementById('results');

    function addResult(title, content, type = 'info') {
      const className = type === 'success' ? 'success' : type === 'error' ? 'error' : type === 'warning' ? 'warning' : '';
      const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : type === 'warning' ? 'âš ï¸' : 'ğŸ“';
      
      resultsDiv.innerHTML += `
        <div class="test-item ${className}">
          <strong>${icon} ${title}</strong>
          <pre>${content}</pre>
        </div>
      `;
    }

    function runTests() {
      resultsDiv.innerHTML = '';
      
      console.log('=== å¼€å§‹ UMD SDK æµ‹è¯• ===');
      
      // æµ‹è¯• 1: æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„å…¨å±€å¯¹è±¡
      addResult('æµ‹è¯• 1: æ£€æŸ¥å…¨å±€å¯¹è±¡', 'æœç´¢æ‰€æœ‰å¯èƒ½çš„ SDK ç›¸å…³å…¨å±€å˜é‡...');
      
      const possibleNames = [
        'zamaRelayerSDK',
        'relayerSDK', 
        'ZamaRelayerSDK',
        'RelayerSDK',
        'initSDK',
        'createInstance'
      ];
      
      let foundNames = [];
      possibleNames.forEach(name => {
        if (window[name]) {
          foundNames.push(`window.${name} (${typeof window[name]})`);
          console.log(`âœ… æ‰¾åˆ°: window.${name}`, window[name]);
        }
      });
      
      if (foundNames.length > 0) {
        addResult('æ‰¾åˆ°çš„å…¨å±€å¯¹è±¡', foundNames.join('\n'), 'success');
      } else {
        addResult('æœªæ‰¾åˆ°ä»»ä½• SDK ç›¸å…³å…¨å±€å¯¹è±¡', 'è¿™æ˜¯ä¸ªé—®é¢˜ï¼', 'error');
      }
      
      // æµ‹è¯• 2: åˆ—å‡ºæ‰€æœ‰ SDK ç›¸å…³çš„å…¨å±€å˜é‡
      const allSDKVars = Object.keys(window).filter(k => 
        k.toLowerCase().includes('sdk') || 
        k.toLowerCase().includes('zama') ||
        k.toLowerCase().includes('relayer') ||
        k.toLowerCase().includes('fhe')
      );
      
      if (allSDKVars.length > 0) {
        addResult('æ‰€æœ‰ SDK/Zama ç›¸å…³å…¨å±€å˜é‡', allSDKVars.join('\n'), 'info');
      }
      
      // æµ‹è¯• 3: å°è¯•è·å– SDK å¯¹è±¡
      addResult('æµ‹è¯• 3: æ™ºèƒ½è·å– SDK', 'å°è¯•å¤šä¸ªå¯èƒ½çš„åç§°...');
      
      let sdk = null;
      const tryNames = ['zamaRelayerSDK', 'relayerSDK', 'ZamaRelayerSDK', 'RelayerSDK'];
      
      for (const name of tryNames) {
        if (window[name] && typeof window[name] === 'object') {
          sdk = window[name];
          addResult('âœ… æ‰¾åˆ° SDK å¯¹è±¡', `window.${name}`, 'success');
          console.log('SDK å¯¹è±¡è¯¦æƒ…:', sdk);
          break;
        }
      }
      
      if (!sdk) {
        // å°è¯•ç›´æ¥æŒ‚è½½çš„å‡½æ•°
        if (typeof window.initSDK === 'function' && typeof window.createInstance === 'function') {
          sdk = {
            initSDK: window.initSDK,
            createInstance: window.createInstance
          };
          addResult('âœ… æ‰¾åˆ°ç›´æ¥æŒ‚è½½çš„å‡½æ•°', 'window.initSDK å’Œ window.createInstance', 'success');
        }
      }
      
      if (!sdk) {
        addResult('âŒ æœªæ‰¾åˆ° SDK', 'UMD è„šæœ¬å¯èƒ½æœªæ­£ç¡®åŠ è½½æˆ–å…¨å±€å˜é‡åä¸åŒ¹é…', 'error');
        return;
      }
      
      // æµ‹è¯• 4: æ£€æŸ¥ SDK æ–¹æ³•
      addResult('æµ‹è¯• 4: æ£€æŸ¥ SDK æ–¹æ³•', 'éªŒè¯å¿…éœ€çš„æ–¹æ³•...');
      
      const methods = ['initSDK', 'createInstance', 'SepoliaConfig'];
      const foundMethods = [];
      const missingMethods = [];
      
      methods.forEach(method => {
        if (sdk[method]) {
          foundMethods.push(`${method}: ${typeof sdk[method]}`);
          console.log(`âœ… ${method}:`, sdk[method]);
        } else {
          missingMethods.push(method);
        }
      });
      
      if (foundMethods.length > 0) {
        addResult('æ‰¾åˆ°çš„æ–¹æ³•', foundMethods.join('\n'), 'success');
      }
      
      if (missingMethods.length > 0) {
        addResult('ç¼ºå¤±çš„æ–¹æ³•', missingMethods.join('\n'), 'warning');
      }
      
      // æµ‹è¯• 5: æ˜¾ç¤º SDK å®Œæ•´ç»“æ„
      addResult('æµ‹è¯• 5: SDK å¯¹è±¡ç»“æ„', JSON.stringify(Object.keys(sdk), null, 2));
      
      // æ€»ç»“
      if (sdk.initSDK && sdk.createInstance) {
        addResult(
          'ğŸ‰ æµ‹è¯•é€šè¿‡ï¼', 
          'SDK å·²æ­£ç¡®åŠ è½½ï¼Œå¯ä»¥åœ¨åº”ç”¨ä¸­ä½¿ç”¨\n\nä½¿ç”¨æ–¹æ³•ï¼š\nconst sdk = window.zamaRelayerSDK (æˆ–å…¶ä»–æ‰¾åˆ°çš„åç§°)\nawait sdk.initSDK()\nconst instance = await sdk.createInstance(config)',
          'success'
        );
      } else {
        addResult(
          'âš ï¸ SDK ä¸å®Œæ•´',
          'æ‰¾åˆ°äº†å…¨å±€å¯¹è±¡ï¼Œä½†ç¼ºå°‘å¿…éœ€çš„æ–¹æ³•\nè¯·æ£€æŸ¥ CDN åœ°å€å’Œç‰ˆæœ¬',
          'warning'
        );
      }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•
    window.addEventListener('DOMContentLoaded', () => {
      console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå‡†å¤‡æµ‹è¯•...');
      setTimeout(runTests, 100);
    });
  </script>
</body>
</html>


